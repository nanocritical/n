from nlang import *

struct prevent_copy =
  isa `not_copyable
  x	:i32

struct nocopy =
  dummy	:prevent_copy
  x	:i32

fun bar = r:nocopy
  r!x = 0
  return r -- this is legal but not handled

fun foo = nocopy
  let r:nocopy -- should not be legal: declare a named retval
  such
    r!x = 0
  return r

export fun main = i32
  return foo.x
