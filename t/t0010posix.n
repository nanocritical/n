from nlang import *
from posix import *

fun main = i32
  let pn = 'xyz':string
  let fd = open pn.cstr open_flags.O_WRONLY | open_flags.O_CREAT
  if fd < 0
    let eno = errno
    return eno.code
  let ret = unlink pn.cstr
    if ret != 0
      let eno = errno
      return eno.code
    ret = unlink pn.cstr
    if ret == 0
      return 1
  return 0
