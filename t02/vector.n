from nlang import *
from nlang.vectors import vector

alias v32 = vector i32

fun foo = v32
  return {1 0 2}

export fun main = i32
  let v = {}:v32
  such
    v#push 0
    v#push 1
    assert <- v#pop == 1
    v#push 1
    for i in v.all.iter
      assert <- v.[i]. == i.trim_u32.reinterpret_signed
  let w = foo
  assert <- w.[0]. == 1
  assert <- w.[1]. == 0
  assert <- w.[2]. == 2
  return v.[1]. - 1
